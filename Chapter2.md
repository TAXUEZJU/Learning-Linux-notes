## Linux精讲

#### 创建和删除目录
* `mkdir`  
参数`-p`可根据需要创建父目录，并且创建已存在目录不报错  
参数`-v`为每个创建的目录打印一条信息
* `rmdir`  
只能删除空目录，可以加参数`-p`删除一串空目录

#### rm命令
删除文件或目录
* 参数`-r`可以删除目录（包含非空目录）
* 参数`-f`表示强制删除，即使目录不存在也不会报错
* 参数`-i`会在执行删除前提示
* 参数`-v`解释每一步骤

#### cp命令
复制，格式为 `cp [选项] [来源文件] [目录文件]`
* 参数`-r`可拷贝目录
* 参数`-i`提示，文件存在会询问是否覆盖  
__cp一个目录时，如果目标目录已存在，<u>源目录会放到目标目录下面</u>，除非目标目录和复制目录同名__

#### mv命令
移动，也可用作重命名，格式 `mv [选项] [源文件] [目标文件]`
* `-i`提示，存在询问是否覆盖  
__需要注意的是，若目标文件为目录且存在，则会把源文件移动到目标目录里__

#### 文件查看命令
* `cat` 查看文件内容并显示  
参数`-n` 能显示行号  
参数`-A` 显示所有，包括特殊字符

* `tac` 与`cat`类似，从最后一行开始显示，直到第一行

* `more` 查看文件内容，当文件内容太多可以按空格键续看下一屏

* `less` 作用与`more`相同，支持上翻，下翻，空格翻页，按`j`向下移动，按`k`向上移动，也可用`Ctrl+b`和`Ctrl+f`实现上翻页和下翻页。  
<u>
注意，`more`和`less`查看时，可以用`/`和`？`加字符串搜索内容，按`n`显示下一个，不同在于前者在当前行向下搜索，后者向上搜索。按`G`快速到文本末端，`g`返回文件首部。
</u>(注：实测less可以，more一部分不适用。more太弱了，尽量用less)  

* `head` 显示文件前十行，加`-n`则显示文件前__n__行  

* `tail` 显示文件最后十行，参数`-n`作用与`head`相同  
`-f` 动态显示文件最后十行，适用于不断增加的文件
`-F` 与`-f`作用相同，但不会因为删除重建而停止跟踪

#### 文件和目录属性
执行`ls -l`后显示内容分别代表的意义，举例  
`-rw-r--r-- 1 taxue users 4300 Jan  7 13:50 Chapter1.md`  
* 文件类型  
注意第一列第一个字符  
`d` 表示该文件为目录  
`-` 表示为普通文件  
`l` 表示链接文件  
`b` 表示为块设备，比如`/dev/sda`  
`c` 表示为串行端口设备，例如键盘鼠标  
`s` 表示为套接字文件（socket），用于进程间通信

* 文件权限  
第一列后9位，每组三位，分别表示所有者（user），所属群组（group），非本群组（others）的权限  
`r` 为可读  
`w` 为可写  
`x` 为可执行

* 其余几列含义  
第2列，表示链接占用的节点（inode），如果为目录，则数值与目录下有多少一级子目录有关  
第3列，表示该文件的所有者  
第4列，表示该文件的所属组  
第5列，表示该文件的大小  
第6、7、8列为该文件最近的修改日期  
第9列，文件名

#### chmod命令
更改文件权限，每一组用数字表示权限，`r`为4，`w`为2，`x`为1，`-`为0，  
比如`-rwxrw----`即为760  
* 注意，root用户，默认一个目录权限__755__，文件默认权限__644__
* 语法，`chmod [-R] xyz 文件名`（xyz表示相应数字）
`-R`表示级联更改  
* 语法2，以`u`，`g`，`o`分别表示三组属性，`a`表示全部，`+`，`-`，`=`，以及`r`，`w`，`x`更改权限，举例  
`chmod u=rwx,og=rx test`  
`chmod u+x test`
* `umask`  
可用来更改默认权限，一般用后三位，注意以下两条规则：  
（1）建立普通文件，预设没有可执行，最大权限666  
（2）建立目录，预设开放所有权限，即777  
<u>
`umask`表示上述两条规则默认值需要减去的权限，比如`umask`为022，即----w--w-，则用对应的777（即rwxrwxrwx）减去前面权限，得到rwxr-xr-x(即755)，即为默认权限
</u>
* `umask` 可以在`/etc/bashrc`中更改，预设情况下，root的umask为022，一般使用者为002

#### chown命令  
更改文件的所有者及所属组  
* 语法  
`chown [-R] [账户名] [文件名]`  
`chown [-R] :[组名] [文件名]`  
`chown [-R] [账户名]：[组名] [文件名]`  
注：`：`可用`.`代替，参数`-R`用于级联更改  
* `chgrp`，用于更改所属组，语法`chgrp [组名] [文件名]`，参数`-R`同样可用于级联更改

#### chattr文件隐藏属性
* 语法 `chattr [+-=] [参数] [文件名或目录名]`
* 参数列表  
`A`：增加该属性后，文件或目录的atime将不可被修改；  
`S`：增加该属性后，会将数据同步写入磁盘中；  
`a`：增加该属性后，只能追加不能删除，非root用户不能设定该属性；  
`c`：自动压缩该文件，读取时会自动解压；  
`i`：增加后，文件不能被删除、重命名、设定软链接、写入、新增数据  
常用的为`a`和`i`两个选项
* `lsattr`可用来读取文件或目录的特殊权限  
语法`lsattr [-aR] [文件或目录名]`  
`-a` 连同隐藏文件一同列出  
`-R` 连同子目录数据一同列出

#### 特殊权限之suid、sgid、sticky_bit
该权限只针对二进制可执行文件，使文件在执行阶段具有文件所有者（所属组）的权限。  
##### set uid
可使文件在执行阶段具有文件所有者的权限，使用`chmod`可修改此特殊权限  
* 假设文件__file__权限为755，依次执行  
`chmod u+s file`  
`ls -l file`  
能看到__file__的权限为`-rwsr-xr-x`，此时__file__已被增加`set uid`权限，若__file__所有者不具备执行权限，则会`s`会显示为`S`  

##### set gid
可使文件执行时具有所属组权限，若目录被设置这个权限，任何用户在此目录下创建的文件和目录都具有和该目录所属组相同的组  
* `chmod g+s [file/directory]`  
此后相应用户组部分的`x`会变成`s`，比如`rwxr-sr-x`,若所属组不具有执行权限，则会显示为`S`  

##### sticky_bit
可理解为防删除位  
一个文件是否可以被某用户删除，取决于该文件所在目录是否对该用户具有写权限。如果没有写权限，目录下的所有文件都不能被删除，同时也不能添加新的文件。如果希望用户能够添加文件但同时不能删除目录下其他用户的文件，则可对父目录增加权限。设置后，即使用户对目录具有写权限，也不能删除其他用户的文件。
* `chmod o+t dirname`

##### 关于特殊权限的数值
传统权限用数值表示是三位数，若具有特殊权限，用四位表示，第一位数字可以是`0`，`1(--t)`，`2(-s-)`，`3(-st)`，`4(s--)`，`5(s-t)`，`6(ss-)`，`7(sst)`

#### find命令
* `which` 查找PATH路径下可执行文件的绝对路径
* `whereis` 查找文件  
`whereis [-bmsu] [文件名称]`  
具体参数可用`man`指令查看，`whereis`是模糊查找，很少用到
* `locate` 查找文件  
软件包__mlocate__提供，根据预先生成的文件列表库查找文件，可用`updatedb`生成（更新）库，该命令不适用精准搜索，不常用
* `find` 搜索文件  
语法`find [路径] [参数]`  
`-atime +n/-n` 访问或执行时间大于/小于n天的文件  
`-ctime +n/-n` 写入、更改inode属性（例如更改所有者、权限或链接）时间大于/小于n天的文件  
`-mtime +n/-n` 写入时间大于/小于n天的文件  
注：`time`改为`min`即为分钟  
另注意参数`-type`（文件类型）、`-perm`（权限）、`-maxdepth`（遍历的最大层级，参数1即为仅该目录下）

#### 三个时间属性
