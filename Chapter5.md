## Shell编程入门

### Shell特性
* `history`命令历史  
`!!`表示执行上一条指令  
`!n`表示执行命令历史中第n条指令  
`!$`表示上一条命令中的最后一个参数  
`!字符串`（字符串大于等于1）表示执行命令历史中最近一次以该字符串开头的命令  
`~/.bash_history`该位置存放命令历史，默认存放1000条，数量可以通过修改环境变量`$HISTSIZE`的值来更改
* `Tab`键补全路径或指令，连按两次会列出所有匹配的选项
* `alias`设置别名  
执行`alias`可以查看预设的别名  
`alias 命令别名='具体的指令'`，比如`alias md='mkdir -p'`  
`unalias 命令别名`可以取消别名  
`alias`所做更改仅限于本次登录，要始终有效需要写入`~/.bashrc`
* 通配符`*`匹配零个或多个字符，`？`匹配一个字符
* 输入重定向`<`  
输出重定向`>`（又叫正确重定向，不会接收错误信息）  
错误重定向`2>`  
追加重定向`>>`，错误追加重定向`2>>`
* 管道符`|`，可将前面命令运行结果作为后面命令的参数
* `jobs`显示任务列表及任务状态，`fg`将后台命令调至前台继续运行，`bg`将任务调至后台继续运行，可以看到后台任务后多一个`&`符号

### Shell变量
* 变量简单理解就是用简单的字符串代替某些具有特殊意义的信息，比如`$LANG`表示系统的语言设置，`echo $LANG`可以查看变量的值
* `env`打印当前用户的环境变量，`set`显示系统中已存在的shell变量
* 终端执行`变量名=值`可以在当次登录的shell中设置变量，如`a=1`
* 变量名只能有英文、数字及下划线组成，不能以数字开头
* 变量内容含有特殊字符，需要加单引号,单引号会取消特殊字符的本身作用；变量内容本身带有单引号，就需要用到双引号
* 变量内容中需要用到其他命令运行结果可以使用反引号，如``myname=`pwd` ``
* 变量内容可以累加其他变量内容，用双引号，如`myname="$LANG"Linux`
* 父shell中设定的变量不会在子shell中生效，除非使用`export`声明该变量，比如`export a`，`export`后不加变量名则会声明所有变量
* 取消变量使用`unset 变量名`，如`unset a`

### 系统和用户的环境变量配置文件
* `/etc/profile`中预设了几个重要变量，如__PATH__，__USER__，__LOGNAME__等
* 正常情况下不修改`/etc/profile`，而是在`/etc/profile.d/`下新增sh文件，执行`source /etc/profile`即可生效更改
* `/etc/bashrc`（一些系统是`/etc/bash.bashrc`）主要预设umask以及PS1，PS1即输入命令时最前面那一串字符
* `~/.bashrc`，包含专用于shell的bash信息，当登录时以及每次打开新shell，该文件被读取、可以将用户自定义的alias以及变量写到这个文件中
* `~/.bash_history`，记录命令历史
* `~/.bash_logout`，当退出shell，执行该文件，可以把清理工作放到该文件中
* `~/.bash_profile`，定义用户个人化路径与环境变量的文件名称，用户登录时，该文件仅仅执行一次
* 在`.bash_profile`中定义了一个变量，在`crontab`里面不会被识别

### Shell中特殊符号
* `*`通配符，代表零个或多个任意字符
* `？`只代表一个任意字符
* `#`注释符号，`#`后面的内容会被忽略
* `\`脱意字符，将后面的特殊符号还原为普通字符，如`\*`会被识别为普通的字符星号
* `|`管道符，将符号前命令的结果丢给符号后面的命令，一般常用于针对文档操作的命令如`cat`，`less`，`grep`，`sed`，`awk`
* `$`特殊符号，除了用于变量面前的标识符，还可以和`！`结合使用表示上条命令中最后一个变量
* `;`特殊符号，用于间隔同一行中的多个命令
* `~`特殊符号，表示用户家目录
* `&`特殊符号，一条命令需要放到后台运行则加上这个符号，通常用于命令运行时间非常长的情况
* 重定向符号`>`，`2>`，`<`  
追加重定向`>>`，`2>>`
* `[]`中括号中间为字符组合，代表中间字符的任意一个

### Cut命令
语法`cut -d '分隔字符' [-cf] n`，n为正整数
* `-d`后面指定分隔符，用单引号引起来
* `-f`指定第几段
* `-c`后面可跟数字或数字区间表示截取第几个字符或者截取一个区间中的字符，也可以跟几个数字
* 比如`cat /etc/passwd |cut -d ':' -f 1`表示截取`/etc/passwd`文件中以冒号作为分隔符的第一段

### Sort命令
语法`sort [-t 分隔符] [-kn1,n2] [-nru]`，排序指令
* `-t`分隔符，作用与cut的-d相同
* `-n`使用纯数字排序
* `-r`反向排序
* `-u`去重复，重复的在排序结果中只显示一项
* `-kn1,n2`由`n1`区间排序到`n2`区间，可以只有`-kn1`，即对`n1`字段排序

### wc命令
* `-c`统计文件中的字节数
* `-m`统计文件中的字符数
* `-l`统计文件中的行数
* `-w`统计文件中的单词数
* `-L`显示最长行的长度

### uniq和tee命令
* `uniq`用来去重复的行，常用选项`-c`，统计重复的行数并把行数写在前面，使用`uniq`的前提是先给文件排序，否则`uniq`将不能识别未相邻的重复行，比如`sort test.txt |uniq -c`
* `tee`，类似于重定向`>`，但在写入的同时还会将内容显示在屏幕上，如下
```
taxue@Leap:~> echo "aaaaaa" | tee 1.txt
aaaaaa
```

### tr和split命令
